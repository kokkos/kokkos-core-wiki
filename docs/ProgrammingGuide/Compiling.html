<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="5. Initialization" href="Initialization.html" /><link rel="prev" title="3: Programming Model" href="ProgrammingModel.html" />

    <meta name="generator" content="sphinx-4.3.2, furo 2022.01.02"/>
        <title>4. Compiling - Kokkos documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=df49af52631e7917044a9c21a57f7b83170a6dd0" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=fade93df149f7c5fedb3ff897f799dc7d283b420" />
    <link rel="stylesheet" type="text/css" href="../_static/hacks.css" />
    
    


<style>
  body {
    --color-code-background: #002b36;
  --color-code-foreground: #839496;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Kokkos  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">Kokkos  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="../programmingguide.html">Programming Guide</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="Machine-Model.html">2. Machine Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="ProgrammingModel.html">3: Programming Model</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">4. Compiling</a></li>
<li class="toctree-l2"><a class="reference internal" href="Initialization.html">5. Initialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="View.html">6: View: Multidimensional array</a></li>
<li class="toctree-l2"><a class="reference internal" href="ParallelDispatch.html">7. Parallel dispatch</a></li>
<li class="toctree-l2"><a class="reference internal" href="HierarchicalParallelism.html">8. Hierarchical Parallelism</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="Custom-Reductions.html">9. Custom Reductions</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="Custom-Reductions-Built-In-Reducers.html">9.1 Built-In-Reducers</a></li>
<li class="toctree-l3"><a class="reference internal" href="Custom-Reductions-Built-In-Reducers-with-Custom-Scalar-Types.html">9.2 Built-In Reducers with Custom Scalar Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="Custom-Reductions-Custom-Reducers.html">9.3 Custom Reducers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Atomic-Operations.html">10. Atomic Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="Subviews.html">11: Subviews</a></li>
<li class="toctree-l2"><a class="reference internal" href="Interoperability.html">12. Interoperability and Legacy Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="Kokkos-and-Virtual-Functions.html">13. Kokkos and Virtual Functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../building.html">Build, Install and Use</a></li>
<li class="toctree-l1"><a class="reference internal" href="../keywords.html">CMake Keywords</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../API/core-index.html">API: Core</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../API/core/Initialize-and-Finalize.html">Initialize and Finalize</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../API/core/initialize_finalize/initialize.html">Kokkos::initialize</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/initialize_finalize/finalize.html">Kokkos::finalize</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/initialize_finalize/ScopeGuard.html">Kokkos::ScopeGuard</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../API/core/View.html">View and related</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../API/core/view/create_mirror.html"><code class="docutils literal notranslate"><span class="pre">create_mirror[_view]</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/view/deep_copy.html"><code class="docutils literal notranslate"><span class="pre">deep_copy()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/view/layoutLeft.html"><code class="docutils literal notranslate"><span class="pre">LayoutLeft</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/view/layoutRight.html"><code class="docutils literal notranslate"><span class="pre">LayoutRight</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/view/layoutStride.html"><code class="docutils literal notranslate"><span class="pre">LayoutStride</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/view/realloc.html"><code class="docutils literal notranslate"><span class="pre">realloc</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/view/resize.html"><code class="docutils literal notranslate"><span class="pre">resize</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/view/subview.html"><code class="docutils literal notranslate"><span class="pre">subview</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/view/view.html"><code class="docutils literal notranslate"><span class="pre">View</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/view/view_alloc.html"><code class="docutils literal notranslate"><span class="pre">view_alloc()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/view/view_like.html">View-like Types</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../API/core/ParallelDispatch.html">Parallel Execution/Dispatch</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../API/core/parallel-dispatch/parallel_for.html"><code class="docutils literal notranslate"><span class="pre">parallel_for()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/parallel-dispatch/parallel_reduce.html"><code class="docutils literal notranslate"><span class="pre">parallel_reduce()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/parallel-dispatch/parallel_scan.html"><code class="docutils literal notranslate"><span class="pre">parallel_scan()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/parallel-dispatch/fence.html"><code class="docutils literal notranslate"><span class="pre">fence()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/parallel-dispatch/ParallelForTag.html"><code class="docutils literal notranslate"><span class="pre">ParallelForTag()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/parallel-dispatch/ParallelReduceTag.html"><code class="docutils literal notranslate"><span class="pre">ParallelReduceTag()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/parallel-dispatch/ParallelScanTag.html"><code class="docutils literal notranslate"><span class="pre">ParallelScanTag()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../API/core/builtin_reducers.html">Built-in Reducers</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../API/core/builtinreducers/ReducerConcept.html"><code class="docutils literal notranslate"><span class="pre">ReducerConcept</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/builtinreducers/BAnd.html"><code class="docutils literal notranslate"><span class="pre">BAnd</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/builtinreducers/BOr.html"><code class="docutils literal notranslate"><span class="pre">BOr</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/builtinreducers/LAnd.html"><code class="docutils literal notranslate"><span class="pre">LAnd</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/builtinreducers/LOr.html"><code class="docutils literal notranslate"><span class="pre">LOr</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/builtinreducers/Max.html"><code class="docutils literal notranslate"><span class="pre">Max</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/builtinreducers/MaxLoc.html"><code class="docutils literal notranslate"><span class="pre">MaxLoc</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/builtinreducers/Min.html"><code class="docutils literal notranslate"><span class="pre">Min</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/builtinreducers/MinLoc.html"><code class="docutils literal notranslate"><span class="pre">MinLoc</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/builtinreducers/MinMax.html"><code class="docutils literal notranslate"><span class="pre">MinMax</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/builtinreducers/MinMaxLoc.html"><code class="docutils literal notranslate"><span class="pre">MinMaxLoc</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/builtinreducers/Prod.html"><code class="docutils literal notranslate"><span class="pre">Prod</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/builtinreducers/Sum.html"><code class="docutils literal notranslate"><span class="pre">Sum</span></code></a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../API/core/builtinreducers/ReductionScalarTypes.html">Reduction Scalar Types</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../API/core/builtinreducers/MinMaxLocScalar.html"><code class="docutils literal notranslate"><span class="pre">MinMaxLocScalar</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../API/core/builtinreducers/MinMaxScalar.html"><code class="docutils literal notranslate"><span class="pre">MinMaxScalar</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../API/core/builtinreducers/ValLocScalar.html"><code class="docutils literal notranslate"><span class="pre">ValLocScalar</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../API/core/Execution-Policies.html">Execution Policies</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../API/core/policies/ExecutionPolicyConcept.html"><code class="docutils literal notranslate"><span class="pre">ExecutionPolicy</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/policies/MDRangePolicy.html"><code class="docutils literal notranslate"><span class="pre">MDRangePolicy</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/policies/NestedPolicies.html"><code class="docutils literal notranslate"><span class="pre">NestedPolicies</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/policies/RangePolicy.html"><code class="docutils literal notranslate"><span class="pre">RangePolicy</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/policies/TeamHandleConcept.html"><code class="docutils literal notranslate"><span class="pre">TeamHandleConcept</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/policies/TeamPolicy.html"><code class="docutils literal notranslate"><span class="pre">TeamPolicy</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/policies/TeamThreadRange.html"><code class="docutils literal notranslate"><span class="pre">TeamThreadRange</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/policies/TeamVectorRange.html"><code class="docutils literal notranslate"><span class="pre">TeamVectorRange</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/policies/ThreadVectorRange.html"><code class="docutils literal notranslate"><span class="pre">ThreadVectorRange</span></code></a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../API/core/Spaces.html">Spaces</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../API/core/execution_spaces.html">Execution Spaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/memory_spaces.html">Memory Spaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/SpaceAccessibility.html">Space Accessibility</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../API/core/Task-Parallelism.html">Task-Parallelism</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../API/core/atomics.html">Atomics</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../API/core/atomics/atomic_compare_exchange.html"><code class="docutils literal notranslate"><span class="pre">atomic_compare_exchange</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/atomics/atomic_compare_exchange_strong.html"><code class="docutils literal notranslate"><span class="pre">atomic_compare_exchange_strong</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/atomics/atomic_exchange.html"><code class="docutils literal notranslate"><span class="pre">atomic_exchange</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/atomics/atomic_fetch_op.html"><code class="docutils literal notranslate"><span class="pre">atomic_fetch_[op]</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/atomics/atomic_load.html"><code class="docutils literal notranslate"><span class="pre">atomic_load</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/atomics/atomic_op.html"><code class="docutils literal notranslate"><span class="pre">atomic_[op]</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/atomics/atomic_op_fetch.html"><code class="docutils literal notranslate"><span class="pre">atomic_[op]_fetch</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/atomics/atomic_store.html"><code class="docutils literal notranslate"><span class="pre">atomic_store</span></code></a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../API/core/Numerics.html">Numerics</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../API/core/numerics/mathematical-constants.html">Mathematical constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/numerics/mathematical-functions.html">Common math functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/numerics/numeric-traits.html">Numeric traits</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../API/core/CStyleMemManagement.html">C-style memory management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../API/core/Traits.html">Traits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../API/core/KokkosConcepts.html">Kokkos Concepts</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../API/core/STL-Compatibility.html">STL Compatibility Issues</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../API/core/stl-compat/pair.html"><code class="docutils literal notranslate"><span class="pre">Kokkos::pair</span></code></a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../API/core/Utilities.html">Utilities</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../API/core/utilities/abort.html"><code class="docutils literal notranslate"><span class="pre">Kokkos::abort</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/utilities/complex.html"><code class="docutils literal notranslate"><span class="pre">Kokkos::complex</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/core/utilities/timer.html"><code class="docutils literal notranslate"><span class="pre">Kokkos::Timer</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../API/core/Detection-Idiom.html">Detection Idiom</a></li>
<li class="toctree-l2"><a class="reference internal" href="../API/core/Macros.html">Macros</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../API/containers-index.html">API: Containers</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../API/containers/Bitset.html"><code class="docutils literal notranslate"><span class="pre">Bitset</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../API/containers/Bitset.html#constbitset"><code class="docutils literal notranslate"><span class="pre">ConstBitset</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../API/containers/DualView.html"><code class="docutils literal notranslate"><span class="pre">DualView</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../API/containers/DynamicView.html"><code class="docutils literal notranslate"><span class="pre">DynamicView</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../API/containers/DynRankView.html"><code class="docutils literal notranslate"><span class="pre">DynRankView</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../API/containers/Offset-View.html"><code class="docutils literal notranslate"><span class="pre">OffsetView</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../API/containers/ScatterView.html"><code class="docutils literal notranslate"><span class="pre">ScatterView</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../API/containers/StaticCrsGraph.html"><code class="docutils literal notranslate"><span class="pre">StaticCrsGraph</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../API/containers/Unordered-Map.html"><code class="docutils literal notranslate"><span class="pre">UnorderedMap</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../API/containers/vector.html"><code class="docutils literal notranslate"><span class="pre">vector</span></code></a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../API/algorithms-index.html">API: Algorithms</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../API/algorithms/Random-Number.html">Random-Number</a></li>
<li class="toctree-l2"><a class="reference internal" href="../API/algorithms/Random-Number.html#generator">Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../API/algorithms/Sort.html">Sort</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../API/algorithms/std-algorithms-index.html">Std Algorithms</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../API/algorithms/std-algorithms/Iterators.html">Iterators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/algorithms/std-algorithms/StdMinMaxElement.html">Minimum/maximum</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/algorithms/std-algorithms/StdModSeq.html">Modifying Sequence</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/algorithms/std-algorithms/StdNonModSeq.html">NonModifying Sequence</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/algorithms/std-algorithms/StdNumeric.html">Numeric</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/algorithms/std-algorithms/StdPartioningOps.html">Partitioning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API/algorithms/std-algorithms/StdSorting.html">Sorting</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../API/alphabetical.html">API in Alphabetical Order</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../usecases.html">Use Cases and Examples</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../usecases/MPI-Halo-Exchange.html">MPI Halo Exchange</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usecases/Average-To-Nodes.html">ScatterView averaging elements to nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usecases/MDRangePolicy.html">MDRangePolicy Use Case</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usecases/VirtualFunctions.html">Virtual Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usecases/TaggedOperators.html">Tagged Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usecases/OverlappingHostAndDeviceWork.html">Overlapping Host and Device work</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usecases/Tasking.html">Kokkos Tasking Use Case</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usecases/Kokkos-Fortran-Interoperability.html">Fortran Interop Use Case</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usecases/SoA-and-AoSoA-with-Cabana.html">Array of Structures and Structure of Arrays with Cabana</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../testing-and-issue-tracking.html">Testing and Issue Tracking</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../testing-and-issue-tracking/Requirements-Issues-and-Feedback.html">Requirements, Issues and Feedback</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing-and-issue-tracking/Testing-Process-Details.html">Attachments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing-and-issue-tracking/Testing-Processes.html">Kokkos Testing Processes and Change Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing-and-issue-tracking/Testing-Workflow-Components.html">Kokkos Testing Workflow Components</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/kokkos/kokkos-tutorials">Tutorials</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../videolectures.html">Video lectures</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://www.youtube.com/watch?v=rUIcWtFU5qM">1. Intro, Build, Parallel dispatch</a></li>
<li class="toctree-l2"><a class="reference external" href="https://www.youtube.com/watch?v=O-asHTtO7O4">2. Views and Spaces</a></li>
<li class="toctree-l2"><a class="reference external" href="https://www.youtube.com/watch?v=nGyJS8u-6GY">3. Multidim loops and Data Structures</a></li>
<li class="toctree-l2"><a class="reference external" href="https://www.youtube.com/watch?v=s9ecpeWRePs">4. Hierarchical Parallelism</a></li>
<li class="toctree-l2"><a class="reference external" href="https://www.youtube.com/watch?v=xEAyOod57-c">5. SIMD, Streams, Tasking</a></li>
<li class="toctree-l2"><a class="reference external" href="https://www.youtube.com/watch?v=1J3JQ3d3cRc&amp;t=1s">6. Fortran/Python interop, MPI, PGAS</a></li>
<li class="toctree-l2"><a class="reference external" href="https://www.youtube.com/watch?v=MH6zFYGw0HU">7. Kokkos Tools</a></li>
<li class="toctree-l2"><a class="reference external" href="https://www.youtube.com/watch?v=_qD4X66MQF8&amp;t=1s">8. Kokkos Kernels Math Library</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/kokkos/kokkos">GitHub Repo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../citation.html">Citing Kokkos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <div class="section" id="compiling">
<h1>4. Compiling<a class="headerlink" href="#compiling" title="Permalink to this headline">¶</a></h1>
<p>This chapter explains how to compile Kokkos and how to link your application against Kokkos. Kokkos supports three methods to build:</p>
<ul class="simple">
<li><p>General CMake build system</p></li>
<li><p>Trilinos’ CMake build system</p></li>
<li><p>Embedded GNU Makefile</p></li>
</ul>
<p>Note that the build methods listed above should not be mixed. For example, do not include the GNU Makefile in your application build process, while explicitly linking against a pre-compiled Kokkos library in Trilinos. We also include specific advice for building for NVIDIA GPUs and Intel Xeon Phi.</p>
<div class="section" id="general-information">
<h2>4.1 General Information<a class="headerlink" href="#general-information" title="Permalink to this headline">¶</a></h2>
<p>Kokkos consists mainly of header files. Only a few functions have to be compiled into object files outside of the application’s source code. Those functions are contained in <code class="docutils literal notranslate"><span class="pre">.cpp</span></code> files inside the <code class="docutils literal notranslate"><span class="pre">kokkos/core/src</span></code> directory and its subdirectories. The files are internally protected with macros to prevent compilation if the related execution space is not enabled. Thus, it is not necessary to create a list of included object files specific to your compilation target; one may simply compile all <code class="docutils literal notranslate"><span class="pre">.cpp</span></code> files. The enabled features are controlled via macros which have to be provided in the compilation line or the generated <code class="docutils literal notranslate"><span class="pre">KokkosCore_config.h</span></code> include file; a subset of the macros can be found in Table 4.1.  For the most part, all of these macros are enabled/disabled using the options and settings controlled through one of the build methods previously mentioned.</p>
<p>To compile Kokkos, a C++14 compliant compiler is needed. For an up-to-date list of compilers that are tested on a nightly basis, please refer to the README on the GitHub repository. At the time of writing supported compilers include:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Minimum</span> <span class="n">Compiler</span> <span class="n">Versions</span>

    <span class="n">GCC</span><span class="p">:</span> <span class="mf">5.3</span><span class="o">.</span><span class="mi">0</span>
    <span class="n">Clang</span><span class="p">:</span> <span class="mf">4.0</span><span class="o">.</span><span class="mi">0</span>
    <span class="n">Intel</span><span class="p">:</span> <span class="mf">17.0</span><span class="o">.</span><span class="mi">1</span>
    <span class="n">NVCC</span><span class="p">:</span> <span class="mf">9.2</span><span class="o">.</span><span class="mi">88</span>
    <span class="n">NVC</span><span class="o">++</span><span class="p">:</span> <span class="mf">21.5</span>
    <span class="n">ROCM</span><span class="p">:</span> <span class="mf">4.3</span>
    <span class="n">MSVC</span><span class="p">:</span> <span class="mf">19.29</span>
    <span class="n">IBM</span> <span class="n">XL</span><span class="p">:</span> <span class="mf">16.1</span><span class="o">.</span><span class="mi">1</span>
    <span class="n">Fujitsu</span><span class="p">:</span> <span class="mf">4.5</span><span class="o">.</span><span class="mi">0</span>
    <span class="n">ARM</span><span class="o">/</span><span class="n">Clang</span> <span class="mf">20.1</span>

<span class="n">Primary</span> <span class="n">Tested</span> <span class="n">Compilers</span>

    <span class="n">GCC</span><span class="p">:</span> <span class="mf">5.3</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="mf">6.1</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="mf">7.3</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="mf">8.3</span><span class="p">,</span> <span class="mf">9.2</span><span class="p">,</span> <span class="mf">10.0</span>
    <span class="n">NVCC</span><span class="p">:</span> <span class="mf">9.2</span><span class="o">.</span><span class="mi">88</span><span class="p">,</span> <span class="mf">10.1</span><span class="p">,</span> <span class="mf">11.0</span>
    <span class="n">Clang</span><span class="p">:</span> <span class="mf">8.0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="mf">9.0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="mf">10.0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="mf">12.0</span><span class="o">.</span><span class="mi">0</span>
    <span class="n">Intel</span> <span class="mf">17.4</span><span class="p">,</span> <span class="mf">18.1</span><span class="p">,</span> <span class="mf">19.5</span>
    <span class="n">MSVC</span><span class="p">:</span> <span class="mf">19.29</span>
    <span class="n">ARM</span><span class="o">/</span><span class="n">Clang</span><span class="p">:</span> <span class="mf">20.1</span>
    <span class="n">IBM</span> <span class="n">XL</span><span class="p">:</span> <span class="mf">16.1</span><span class="o">.</span><span class="mi">1</span>
    <span class="n">ROCM</span><span class="p">:</span> <span class="mf">4.3</span><span class="o">.</span><span class="mi">0</span>

<span class="n">Build</span> <span class="n">system</span><span class="p">:</span>

    <span class="n">CMake</span> <span class="o">&gt;=</span> <span class="mf">3.16</span><span class="p">:</span> <span class="n">required</span>
    <span class="n">CMake</span> <span class="o">&gt;=</span> <span class="mf">3.18</span><span class="p">:</span> <span class="n">Fortran</span> <span class="n">linkage</span><span class="o">.</span> <span class="n">This</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">affect</span> <span class="n">most</span> <span class="n">mixed</span> <span class="n">Fortran</span><span class="o">/</span><span class="n">Kokkos</span> <span class="n">builds</span><span class="o">.</span> <span class="n">See</span> <span class="n">build</span> <span class="n">issues</span><span class="o">.</span>
    <span class="n">CMake</span> <span class="o">&gt;=</span> <span class="mf">3.21</span><span class="o">.</span><span class="mi">1</span> <span class="k">for</span> <span class="n">NVC</span><span class="o">++</span>

</pre></div>
</div>
<h4>Table 4.1: Configuration Macros (KokkosCore_config.h)</h4>
<div class="table-wrapper"><table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-left head"><p>Macro</p></th>
<th class="text-left head"><p>Effect</p></th>
<th class="text-left head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">KOKKOS_ENABLE_CUDA</span></code></p></td>
<td class="text-left"><p>Enable the CUDA execution space.</p></td>
<td class="text-left"><p>Requires a compiler capable of understanding CUDA-C. See <a class="reference internal" href="#gnu-makefile-system"><span class="std std-ref">Section 4.4</span></a>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">KOKKOS_ENABLE_OPENMP</span></code></p></td>
<td class="text-left"><p>Enable the OpenMP execution space.</p></td>
<td class="text-left"><p>Requires the compiler to support OpenMP (e.g., <code class="docutils literal notranslate"><span class="pre">-fopenmp</span></code>).</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">KOKKOS_ENABLE_THREADS</span></code></p></td>
<td class="text-left"><p>Enable the C++ Threads execution space.</p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">KOKKOS_ENABLE_SERIAL</span></code></p></td>
<td class="text-left"><p>Enable the Serial execution space.</p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">KOKKOS_ENABLE_HWLOC</span></code></p></td>
<td class="text-left"><p>Enable thread and memory pinning via hwloc.</p></td>
<td class="text-left"><p>Requires linking with <code class="docutils literal notranslate"><span class="pre">libhwloc</span></code>.</p></td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="using-general-cmake-build-system">
<h2>4.2 Using General CMake build system<a class="headerlink" href="#using-general-cmake-build-system" title="Permalink to this headline">¶</a></h2>
<div class="section" id="installing-and-using-kokkos">
<h3>Installing and Using Kokkos<a class="headerlink" href="#installing-and-using-kokkos" title="Permalink to this headline">¶</a></h3>
<p>Kokkos provides a CMake style build system.
As C++ continues to develop for C++20 and beyond, CMake is likely to provide the most robust support
for C++.  Applications heavily leveraging Kokkos are strongly encouraged to use a CMake build system. Kokkos requires CMake version 3.10 and above.</p>
<p>You can either use Kokkos as an installed package (encouraged) or use Kokkos in-tree included in your project.</p>
</div>
<div class="section" id="using-kokkos-installed-package">
<h3>Using Kokkos installed Package<a class="headerlink" href="#using-kokkos-installed-package" title="Permalink to this headline">¶</a></h3>
<p>With the Kokkos package installed, you build and link with the Kokkos library using CMake by adding the following to you your <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code>:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">find_package</span><span class="p">(</span><span class="s">Kokkos</span> <span class="s">REQUIRED</span><span class="p">)</span>
</pre></div>
</div>
<p>Then for every executable or library in your project:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">myTarget</span> <span class="s">Kokkos::kokkos</span><span class="p">)</span>
</pre></div>
</div>
<p>The target_link_libraries command will find and include all the necessary pre-processor, compiler, and linker flags that are required for an application using Kokkos.  When running CMake for your project you will need to specify the directory containing the Kokkos package:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">DKokkos_ROOT</span><span class="o">=&lt;</span><span class="n">Kokkos</span> <span class="n">Install</span> <span class="n">Directory</span><span class="o">&gt;/</span><span class="n">lib64</span><span class="o">/</span><span class="n">cmake</span><span class="o">/</span><span class="n">Kokkos</span>
</pre></div>
</div>
<p>If compiling with something other than g++, your application should use a compiler that is consistent with that used to build the Kokkos package.  This is especially true when using nvcc_wrapper.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">DCMAKE_CXX_COMPILER</span><span class="o">=&lt;</span><span class="n">Kokkos</span> <span class="n">Install</span> <span class="n">Directory</span><span class="o">&gt;/</span><span class="nb">bin</span><span class="o">/</span><span class="n">nvcc_wrapper</span>
</pre></div>
</div>
<p><strong>Important note</strong>
With Kokkos release 3.0 the externally defined CMAKE_CXX_FLAGS are not propagated to projects that include the kokkos package. This limitation is especially important when using Clang compilers with gcc and Cuda.  The Clang options that are provided via the CMAKE_CXX_FLAGS with the Kokkos project are illustrated below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">gcc</span><span class="o">-</span><span class="n">toolchain</span><span class="o">=&lt;</span><span class="n">path</span> <span class="n">to</span> <span class="n">gcc</span> <span class="n">source</span> <span class="n">tree</span><span class="o">&gt;</span>
<span class="o">--</span><span class="n">cuda</span><span class="o">-</span><span class="n">path</span><span class="o">=&lt;</span><span class="n">path</span> <span class="n">to</span> <span class="n">cuda</span> <span class="n">source</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="using-kokkos-in-tree-build">
<h3>Using Kokkos in-tree build<a class="headerlink" href="#using-kokkos-in-tree-build" title="Permalink to this headline">¶</a></h3>
<p>If building in-tree, the Kokkos source directory must be within a subdirectory of your application source tree (relative to the location of your application CMakeLists.txt)</p>
<p>To include Kokkos in the application add the following to CMakeLists.txt:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">add_subdirectory</span><span class="p">(</span><span class="s">&lt;path</span> <span class="s">to</span> <span class="s">Kokkos</span> <span class="s">dir</span> <span class="s">relative</span> <span class="s">to</span> <span class="s">your</span> <span class="s">CMakeList.txt&gt;</span><span class="p">)</span>
<span class="nb">include_directories</span><span class="p">(</span><span class="o">${</span><span class="nv">Kokkos_INCLUDE_DIRS_RET</span><span class="o">}</span><span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">myTarget</span> <span class="s">kokkos</span><span class="p">)</span>
</pre></div>
</div>
<p>The include_directories command is necessary to update the application include paths, and the target link libraries command links your executable to the Kokkos library.  It does not require a package name.
Using this method, the Kokkos options necessary to specify the devices, arch and options must be specified with your application CMake command.  See below for the list of available settings (keywords)</p>
</div>
</div>
<div class="section" id="configuring-kokkos-with-cmake">
<h2>Configuring Kokkos with CMake<a class="headerlink" href="#configuring-kokkos-with-cmake" title="Permalink to this headline">¶</a></h2>
<p>A very basic installation is done with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; mkdir build
&gt; <span class="nb">cd</span> build
&gt; cmake <span class="si">${</span><span class="nv">srcdir</span><span class="si">}</span> <span class="se">\</span>
 -DCMAKE_CXX_COMPILER<span class="o">=</span>g++ <span class="se">\</span>
 -DCMAKE_INSTALL_PREFIX<span class="o">=</span><span class="si">${</span><span class="nv">my_install_folder</span><span class="si">}</span>
</pre></div>
</div>
<p>which builds and installed a default Kokkos when you run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code>.
There are numerous device backends, options, and architecture-specific optimizations that can be configured, e.g.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; cmake <span class="si">${</span><span class="nv">srcdir</span><span class="si">}</span> <span class="se">\</span>
 -DCMAKE_CXX_COMPILER<span class="o">=</span>g++ <span class="se">\</span>
 -DCMAKE_INSTALL_PREFIX<span class="o">=</span><span class="si">${</span><span class="nv">my_install_folder</span><span class="si">}</span> <span class="se">\</span>
 -DKokkos_ENABLE_OPENMP<span class="o">=</span>On
</pre></div>
</div>
<p>which activates the OpenMP backend. All the options controlling device backends, options, architectures, and third-party libraries (TPLs) are given below under the keywords listing.</p>
<div class="section" id="using-generate-makefile-bash">
<h3>Using generate_makefile.bash<a class="headerlink" href="#using-generate-makefile-bash" title="Permalink to this headline">¶</a></h3>
<p>As an alternative to calling the cmake command directly, the generate_makefile.bash command can be used to configure the CMake build environment.  The generate_makefile.bash equivalent to the above OpenMP example is as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; <span class="si">${</span><span class="nv">srcdir</span><span class="si">}</span>/generate_makefile.bash --compiler<span class="o">=</span>g++ <span class="se">\</span>
  --with-openmp --prefix<span class="o">=</span><span class="si">${</span><span class="nv">my_install_folder</span><span class="si">}</span>
</pre></div>
</div>
<p>For a full list of generate_makefile.bash options use the command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; <span class="si">${</span><span class="nv">srcdir</span><span class="si">}</span>/generate_makefile.bash --help
</pre></div>
</div>
</div>
<div class="section" id="spack">
<h3>Spack<a class="headerlink" href="#spack" title="Permalink to this headline">¶</a></h3>
<p>An alternative to manually building with CMake is to use the Spack package manager.
To do so, download <a class="reference external" href="https://github.com/spack/spack">Spack</a> and add it to your path by sourcing the appropriate env file in the share folder, e.g.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; <span class="nb">source</span> spack/share/spack/setup-env.sh
</pre></div>
</div>
<p>A basic installation would be done as:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; spack install kokkos
</pre></div>
</div>
<p>Spack allows options and compilers to be tuned in the install command.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; spack install kokkos@3.0 %gcc@7.3.0 +openmp
</pre></div>
</div>
<p>This example illustrates the three most common parameters to Spack:</p>
<ul class="simple">
<li><p>Variants: specified with, e.g. <code class="docutils literal notranslate"><span class="pre">+openmp</span></code>, this activates (or deactivates with, e.g. <code class="docutils literal notranslate"><span class="pre">~openmp</span></code>) certain options.</p></li>
<li><p>Version:  immediately following <code class="docutils literal notranslate"><span class="pre">kokkos</span></code> the <code class="docutils literal notranslate"><span class="pre">@version</span></code> can specify a particular Kokkos to build</p></li>
<li><p>Compiler: a default compiler will be chosen if not specified, but an exact compiler version can be given with the <code class="docutils literal notranslate"><span class="pre">%</span></code>option.</p></li>
</ul>
<p>For a complete list of Kokkos options, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; spack info kokkos
</pre></div>
</div>
<div class="section" id="spack-development">
<h4>Spack Development<a class="headerlink" href="#spack-development" title="Permalink to this headline">¶</a></h4>
<p>Spack currently installs packages to a location determined by a unique hash. This hash name is not really “human readable”.
Generally, Spack usage should never really require you to reference the computer-generated unique install folder.
If you must know, you can locate Spack Kokkos installations with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; spack find -p kokkos ...
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">...</span></code> is the unique spec identifying the particular Kokkos configuration and version.</p>
<p>A better way to use Spack for doing Kokkos development is the DIY feature of Spack.
If you wish to develop Kokkos itself, go to the Kokkos source folder:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; spack diy -u cmake kokkos@diy ...
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">...</span></code> is a Spack spec identifying the exact Kokkos configuration.
This then creates a <code class="docutils literal notranslate"><span class="pre">spack-build</span></code> directory where you can run <code class="docutils literal notranslate"><span class="pre">make</span></code>.</p>
<p>If doing development on a downstream project, you can do almost the same thing.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; spack diy -u cmake <span class="si">${</span><span class="nv">myproject</span><span class="si">}</span>@<span class="si">${</span><span class="nv">myversion</span><span class="si">}</span> ... ^kokkos...
</pre></div>
</div>
<p>where the <code class="docutils literal notranslate"><span class="pre">...</span></code> are the specs for your project and the desired Kokkos configuration.
Again, a <code class="docutils literal notranslate"><span class="pre">spack-build</span></code> directory will be created where you can run <code class="docutils literal notranslate"><span class="pre">make</span></code>.</p>
<p>Spack has a few idiosyncrasies that make building outside of Spack annoying related to Spack forcing the use of a compiler wrapper. This can be worked around by having a <code class="docutils literal notranslate"><span class="pre">-DSpack_WORKAROUND=On</span></code> given your CMake. Then add the block of code to your CMakeLists.txt:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">if</span> <span class="p">(</span><span class="s">Spack_WORKAROUND</span><span class="p">)</span>
 <span class="nb">set</span><span class="p">(</span><span class="s">SPACK_CXX</span> <span class="o">$ENV{</span><span class="nv">SPACK_CXX</span><span class="o">}</span><span class="p">)</span>
 <span class="nb">if</span><span class="p">(</span><span class="s">SPACK_CXX</span><span class="p">)</span>
   <span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_COMPILER</span> <span class="o">${</span><span class="nv">SPACK_CXX</span><span class="o">}</span> <span class="s">CACHE</span> <span class="s">STRING</span> <span class="s2">"the C++ compiler"</span> <span class="s">FORCE</span><span class="p">)</span>
   <span class="nb">set</span><span class="p">(</span><span class="s">ENV{CXX}</span> <span class="o">${</span><span class="nv">SPACK_CXX</span><span class="o">}</span><span class="p">)</span>
 <span class="nb">endif</span><span class="p">()</span>
<span class="nb">endif</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="kokkos-cmake-keyword-listing">
<h3>Kokkos CMake Keyword Listing<a class="headerlink" href="#kokkos-cmake-keyword-listing" title="Permalink to this headline">¶</a></h3>
<p>Please see the <a class="reference internal" href="../keywords.html"><span class="doc std std-doc">documentation page with all keywords</span></a>.</p>
</div>
</div>
<div class="section" id="using-trilinos-cmake-build-system">
<h2>4.3 Using Trilinos’ CMake build system<a class="headerlink" href="#using-trilinos-cmake-build-system" title="Permalink to this headline">¶</a></h2>
<p>The Trilinos project (see <a class="reference external" href="https://trilinos.org"><code class="docutils literal notranslate"><span class="pre">trilinos.org</span></code></a> and github for the <a class="reference external" href="https://github.com/trilinos/Trilinos">source code</a> repository) is an effort to develop algorithms and enabling technologies within an object-oriented software framework for the solution of large-scale, complex multiphysics engineering and scientific problems. Trilinos is organized into packages. Even though Kokkos is a stand-alone software project, Trilinos uses Kokkos extensively. Thus, Trilinos’ source code includes Kokkos’ source code, and builds Kokkos as part of its build process.</p>
<p>Trilinos’ build system uses CMake. Thus, to build Kokkos as part of Trilinos, you must first install CMake (version <code class="docutils literal notranslate"><span class="pre">3.17</span></code> or newer). To enable Kokkos when building Trilinos, set the CMake option <code class="docutils literal notranslate"><span class="pre">Trilinos_ENABLE_Kokkos</span></code>. Trilinos’ build system lets packages express dependencies on other packages or external libraries. If you enable any Trilinos package (e.g., Tpetra) that has a required dependency on Kokkos, Trilinos will enable Kokkos automatically. Configuration macros are automatically inferred from Trilinos settings. For example, if the CMake option <code class="docutils literal notranslate"><span class="pre">Trilinos_ENABLE_OpenMP</span></code> is <code class="docutils literal notranslate"><span class="pre">ON</span></code>, Trilinos will define the macro <code class="docutils literal notranslate"><span class="pre">Kokkos_ENABLE_OPENMP</span></code>. Trilinos’ build system will autogenerate the previously mentioned <code class="docutils literal notranslate"><span class="pre">KokkosCore_config.h</span></code> file that contains those macros.</p>
<p>Trilinos’ CMake build system utilizes Kokkos’ build system to set compiler flags, compiler options, architectures, etc. CMake variables <code class="docutils literal notranslate"><span class="pre">CMAKE_CXX_COMPILER</span></code>, <code class="docutils literal notranslate"><span class="pre">CMAKE_C_COMPILER</span></code>, and <code class="docutils literal notranslate"><span class="pre">CMAKE_FORTRAN_COMPILER</span></code> are used to specify the compiler. To configure Trilinos for various architectures, with Kokkos enabled, the CMake variable <code class="docutils literal notranslate"><span class="pre">Kokkos_ARCH_&lt;ArchCode&gt;</span></code> should be set, matching ArchCode to the appropriate architecture as specified in <a class="reference internal" href="../keywords.html"><span class="doc std std-doc">Architecture Keywords</span></a>.</p>
<p>For example, <code class="docutils literal notranslate"><span class="pre">Kokkos_ARCH_HSW</span></code> sets the architecture variables for a machine with Intel Haswell CPUs. Also, when setting the <code class="docutils literal notranslate"><span class="pre">Kokkos_ARCH_&lt;ArchCode&gt;</span></code> variable it is not necessary to pass required architecture-specific flags to CMake, for example via the <code class="docutils literal notranslate"><span class="pre">CMAKE_CXX_FLAGS</span></code> variable.</p>
<p>Some Trilinos packages with CUDA support currently require the use of UVM (note UVM is enabled by default when configuring Trilinos with CUDA enabled, unless the user explicitly disables it). To ensure proper compilation and execution for such packages, the environment variables <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">CUDA_LAUNCH_BLOCKING=1</span></code> and <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">CUDA_MANAGED_FORCE_DEVICE_ALLOC=1</span></code> must be set.</p>
<div class="section" id="building-trilinos-with-kokkos-develop-branch">
<h3>Building Trilinos with Kokkos’ develop branch<a class="headerlink" href="#building-trilinos-with-kokkos-develop-branch" title="Permalink to this headline">¶</a></h3>
<p>In some cases users may desire to test building Trilinos with Kokkos’ develop branch. Note that incompatibilities between Kokkos’ develop branch and Trilinos may arise between release cycles and <strong>there is no guarantee of stability for this process between releases</strong>.</p>
<p>To support this setup (without overwriting the Kokkos package in Trilinos), users may</p>
<ol class="arabic simple">
<li><p>Add a symbolic link to the Trilinos source directory pointing to local Kokkos’ repository
<code class="docutils literal notranslate"><span class="pre">ln</span> <span class="pre">-s</span> <span class="pre">&lt;path-to-local-kokkos&gt;/kokkos</span> <span class="pre">&lt;path-to-trilinos-src&gt;/kokkos</span></code></p></li>
<li><p>Include the configure option <code class="docutils literal notranslate"><span class="pre">Kokkos_SOURCE_DIR_OVERRIDE:STRING=kokkos</span></code> in their CMake configuration</p></li>
</ol>
<p>The same process above can be applied for KokkosKernels as well, by adding a symbolic link to the local KokkosKernels repository and including the source override configuration option:</p>
<ol class="arabic simple">
<li><p>Add a symbolic link to the Trilinos source directory pointing to local KokkosKernels’ repository
<code class="docutils literal notranslate"><span class="pre">ln</span> <span class="pre">-s</span> <span class="pre">&lt;path-to-local-kokkos-kernels&gt;/kokkos-kernels</span> <span class="pre">&lt;path-to-trilinos-src&gt;/kokkos-kernels</span></code></p></li>
<li><p>Include the configure option <code class="docutils literal notranslate"><span class="pre">KokkosKernels_SOURCE_DIR_OVERRIDE:STRING=kokkos-kernels</span></code></p></li>
</ol>
<p>For builds with CUDA enabled, the path to the <code class="docutils literal notranslate"><span class="pre">nvcc_wrapper</span></code> script should also be specified (as an environment variable for example, i.e. <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">CXX=&lt;path-to-local-kokkos&gt;/bin/nvcc_wrapper</span></code> in a non-MPI build, <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">OMPI_CXX=&lt;path-to-local-kokkos&gt;/bin/nvcc_wrapper</span></code> for MPI build with OpenMPI, etc.)</p>
<p>We refer readers to Trilinos’ documentation for further details.</p>
</div>
</div>
<div class="section" id="using-kokkos-gnu-makefile-system">
<span id="gnu-makefile-system"></span><h2>4.4 Using Kokkos’ GNU Makefile system<a class="headerlink" href="#using-kokkos-gnu-makefile-system" title="Permalink to this headline">¶</a></h2>
<p>The base of the build system is the file <code class="docutils literal notranslate"><span class="pre">Makefile.kokkos</span></code>; it is designed to be included by application Makefiles. It contains logic to (re)generate the <code class="docutils literal notranslate"><span class="pre">KokkosCore_config.h</span></code> file if necessary, build the Kokkos library, and provide updated compiler and linker flags.</p>
<p>The system can digest several variables that are used to configure Kokkos settings and then parses the variables for Keywords. This allows for multiple options to be given for each variable. The separator doesn’t matter as long as it doesn’t interact with the Make system. A list of variables, their meaning and options are given in Table 4.4.</p>
<p>A word of caution on where to include the <code class="docutils literal notranslate"><span class="pre">Makefile.kokkos</span></code>: since the embedded Makefiles define targets, it is usually better to include it after the first application target has been defined. Since that target can’t use the flags from the embedded Makefiles, it should be a meta target:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CXX=g++
default: main
include Makefile.kokkos
main: $(KOKKOS_LINK_DEPENDS) $(KOKKOS_CPP_DEPENDS) main.cpp
      $(CXX) $(KOKKOS_CPPFLAGS) $(KOKKOS_CXXFLAGS) \
      $(KOKKOS_LDFLAGS) $(KOKKOS_LIBS) main.cpp -o main
</pre></div>
</div>
<p>More example application Makefiles can be found in the tutorial examples under <code class="docutils literal notranslate"><span class="pre">kokkos/example/tutorial</span></code>.</p>
<p>Kokkos provides a script <code class="docutils literal notranslate"><span class="pre">generate_makefile.bash</span></code> which can generate a Makefile for building and installing the library as well as building and running the tests. Please run <code class="docutils literal notranslate"><span class="pre">generate_makefile.bash</span> <span class="pre">--help</span></code> to see options. Note that paths given to the script must be absolute paths, and the script must be run with the <code class="docutils literal notranslate"><span class="pre">bash</span></code> shell (the script will do this if it is run directly, i.e., as <code class="docutils literal notranslate"><span class="pre">./generate_makefile.bash</span></code>).</p>
<h4>Table 4.4: Variables for the GNU Makefile</h4>
<div class="table-wrapper"><table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-right head"><p>Variable</p></th>
<th class="text-left head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">KOKKOS_PATH</span> <span class="pre">(IN)</span></code></p></td>
<td class="text-left"><p>Path to the Kokkos root or install directory. One can either build against an existing install of Kokkos or use its source directly for an embedded build. In the former case the “Input variables” are set inside the embedded Makefile.kokkos and it is not valid to set them differently in the including Makefile.</p></td>
</tr>
<tr class="row-odd"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">CUDA_PATH</span> <span class="pre">(IN)</span></code></p></td>
<td class="text-left"><p>Path to the Cuda toolkit root directory.</p></td>
</tr>
<tr class="row-even"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">KOKKOS_DEVICES</span> <span class="pre">(IN)</span></code></p></td>
<td class="text-left"><p>Execution and Memory Spaces that should be enabled.</p></td>
</tr>
<tr class="row-odd"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">Options</span></code><br/><code class="docutils literal notranslate">    <span class="pre">Default</span></code></p></td>
<td class="text-left"><p>OpenMP, Serial, C++ Threads, Cuda <br/> OpenMP</p></td>
</tr>
<tr class="row-even"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">KOKKOS_ARCH</span> <span class="pre">(IN)</span></code></p></td>
<td class="text-left"><p>The backend architecture to build for.</p></td>
</tr>
<tr class="row-odd"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">Options</span></code> <br/><br/><br/> <code class="docutils literal notranslate"><span class="pre">Default</span></code></p></td>
<td class="text-left"><p>KNL, KNC, SNB, HSW, BDW, Kepler, Kepler30, Kepler35, Kepler37, Maxwell, Maxwell50, Pascal60, Pascal61, ARMv8, ARMv81, ARMv8-ThunderX, BGQ, Power7, Power8 <br/><br/> (no particular architecture flags are set).</p></td>
</tr>
<tr class="row-even"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">KOKKOS_USE_TPLS</span> <span class="pre">(IN)</span></code></p></td>
<td class="text-left"><p>Enable optional third party libraries.</p></td>
</tr>
<tr class="row-odd"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">Options</span></code> <br/> <code class="docutils literal notranslate"><span class="pre">Default</span></code></p></td>
<td class="text-left"><p>hwloc, librt, experimental_memkind <br/> (none)</p></td>
</tr>
<tr class="row-even"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">KOKKOS_OPTIONS</span> <span class="pre">(IN)</span></code></p></td>
<td class="text-left"><p>Enable optional settings</p></td>
</tr>
<tr class="row-odd"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">Options</span></code> <br/> <code class="docutils literal notranslate"><span class="pre">Default</span></code></p></td>
<td class="text-left"><p>aggressive_vectorization <br/> (none)</p></td>
</tr>
<tr class="row-even"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">KOKKOS_CUDA_OPTIONS</span> <span class="pre">(IN)</span></code></p></td>
<td class="text-left"><p>Enable optional settings specific to CUDA.</p></td>
</tr>
<tr class="row-odd"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">Options</span></code> <br/> <code class="docutils literal notranslate"><span class="pre">Default</span></code></p></td>
<td class="text-left"><p>force_uvm, use_ldg, rdc, enable_lambda <br/> (none)</p></td>
</tr>
<tr class="row-even"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">HWLOC_PATH</span> <span class="pre">(IN)</span></code></p></td>
<td class="text-left"><p>Path to the hardware locality library if enabled.</p></td>
</tr>
<tr class="row-odd"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">KOKKOS_DEBUG</span> <span class="pre">(IN)</span></code></p></td>
<td class="text-left"><p>Enable debugging.</p></td>
</tr>
<tr class="row-even"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">Options</span></code> <br/> <code class="docutils literal notranslate"><span class="pre">Default</span></code></p></td>
<td class="text-left"><p>yes, no <br/> no</p></td>
</tr>
<tr class="row-odd"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">KOKKOS_CXX_STANDARD</span> <span class="pre">(IN)</span></code></p></td>
<td class="text-left"><p>Set the C++ standard to be used.</p></td>
</tr>
<tr class="row-even"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">Options</span></code> <br/> <code class="docutils literal notranslate"><span class="pre">Default</span></code></p></td>
<td class="text-left"><p>C++14 <br/> C++14</p></td>
</tr>
<tr class="row-odd"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">KOKKOS_CPPFLAGS</span> <span class="pre">(OUT)</span></code></p></td>
<td class="text-left"><p>Preprocessor flags (include directories and defines). Add this to the applications compiler and preprocessor flags.</p></td>
</tr>
<tr class="row-even"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">KOKKOS_CXXFLAGS</span> <span class="pre">(OUT)</span></code></p></td>
<td class="text-left"><p>Compiler flags. Add this to the applications compiler flags.</p></td>
</tr>
<tr class="row-odd"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">KOKKOS_LDFLAGS</span> <span class="pre">(OUT)</span></code></p></td>
<td class="text-left"><p>Linker flags. Add this to the applications linker flags.</p></td>
</tr>
<tr class="row-even"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">KOKKOS</span> <span class="pre">LIBS</span> <span class="pre">(OUT)</span></code></p></td>
<td class="text-left"><p>Libraries required by Kokkos. Add this to the link line after the linker flags.</p></td>
</tr>
<tr class="row-odd"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">KOKKOS_CPP_DEPENDS</span> <span class="pre">(OUT)</span></code></p></td>
<td class="text-left"><p>Dependencies for compilation units which include any Kokkos header files. <br/> Add this as a dependency to compilation targets including any Kokkos code.</p></td>
</tr>
<tr class="row-even"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">KOKKOS_LINK_DEPENDS</span> <span class="pre">(OUT)</span></code></p></td>
<td class="text-left"><p>Dependencies of an application linking in the Kokkos library. Add this to the dependency list of link targets.</p></td>
</tr>
<tr class="row-odd"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">CXXFLAGS</span> <span class="pre">(IN)</span></code></p></td>
<td class="text-left"><p>User provided compiler flags which will be used to compile the Kokkos library.</p></td>
</tr>
<tr class="row-even"><td class="text-right"><p><code class="docutils literal notranslate"><span class="pre">CXX</span> <span class="pre">(IN)</span></code></p></td>
<td class="text-left"><p>The compiler used to compile the Kokkos library.</p></td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="building-for-cuda">
<h2>4.5 Building for CUDA<a class="headerlink" href="#building-for-cuda" title="Permalink to this headline">¶</a></h2>
<p>Any Kokkos application compiled for CUDA embeds CUDA code via template metaprogramming. Thus, the whole application must be built with a CUDA-capable compiler. (At the moment, the only such compilers are NVIDIA’s NVCC and Clang 4.0+) More precisely, every compilation unit containing a Kokkos kernel or a function called from a Kokkos kernel has to be compiled with a CUDA-capable compiler. This includes files containing <a class="reference internal" href="../API/core/view/view.html"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">Kokkos::View</span></code></span></a> allocations which call an initialization kernel.</p>
<p>All current versions of the NVCC compiler have shortcomings when used as the main compiler for a project, in particular when part of a complex build system. For example, it does not understand most GCC command-line options, which must be prepended by the <code class="docutils literal notranslate"><span class="pre">-Xcompiler</span></code> flag when calling NVCC. Kokkos comes with a shell script, called <code class="docutils literal notranslate"><span class="pre">nvcc_wrapper</span></code>, that wraps NVCC to address these issues. We intend this as a drop-in replacement for a normal GCC-compatible compiler (e.g., GCC or Intel) in your build system. It analyzes the provided command-line options and prepends them correctly. It also adds the correct flags for compiling generic C++ files containing CUDA code (e.g., <code class="docutils literal notranslate"><span class="pre">*.cpp,</span> <span class="pre">*.cxx,</span></code> or <code class="docutils literal notranslate"><span class="pre">*.CC</span></code>). By default <code class="docutils literal notranslate"><span class="pre">nvcc_wrapper</span></code> calls <code class="docutils literal notranslate"><span class="pre">g++</span></code> as the host compiler. You may override this by providing NVCC’s <code class="docutils literal notranslate"><span class="pre">-ccbin</span></code> option as a compiler flag. The default can be set by editing the script itself or by setting the environment variable <code class="docutils literal notranslate"><span class="pre">NVCC_WRAPPER_DEFAULT_COMPILER</span></code>.</p>
<p>Many people use a system like <a class="reference external" href="http://modules.sourceforge.net">Environment Modules</a> to manage their shell environment. When using a module system, it can be useful to provide different versions for different back-end compiler types (e.g., <code class="docutils literal notranslate"><span class="pre">icpc,</span> <span class="pre">pgc++,</span> <span class="pre">g++,</span></code> and <code class="docutils literal notranslate"><span class="pre">clang</span></code>). To use the <code class="docutils literal notranslate"><span class="pre">nvcc_wrapper</span></code> in conjunction with MPI wrappers, simply overwrite which C++ compiler is called by the MPI wrapper. For example, you can reset OpenMPI’s C++ compiler by setting the <code class="docutils literal notranslate"><span class="pre">OMPI_CXX</span></code> environment variable. Make sure that <code class="docutils literal notranslate"><span class="pre">nvcc_wrapper</span></code> calls the host compiler with which the MPI library was compiled.</p>
</div>
<div class="section" id="execution-space-restrictions">
<h2>4.6 Execution Space Restrictions<a class="headerlink" href="#execution-space-restrictions" title="Permalink to this headline">¶</a></h2>
<p>Currently, Kokkos organizes its execution spaces into three categories:</p>
<ul class="simple">
<li><p>Host Serial: A top-level <code class="docutils literal notranslate"><span class="pre">Serial</span></code> execution space with no parallelism or concurrency</p></li>
<li><p>Host Parallel: Typically a threading model for CPUs, currently: <code class="docutils literal notranslate"><span class="pre">OpenMP</span></code> and <code class="docutils literal notranslate"><span class="pre">Threads</span></code>.</p></li>
<li><p>Device Parallel: Typically an attached GPU, currently: <code class="docutils literal notranslate"><span class="pre">CUDA</span></code>, <code class="docutils literal notranslate"><span class="pre">OpenMPTarget</span></code>, and <code class="docutils literal notranslate"><span class="pre">ROCm</span></code>.</p></li>
</ul>
<p>The current Kokkos policy is to allow users, at compile time, to enable <em>at most one</em> execution space from each category. This prevents incompatibilities between different spaces in the same category from degrading the user’s correctness and performance.</p>
</div>
</div>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="Initialization.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">5. Initialization</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="ProgrammingModel.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">3: Programming Model</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2014, National Technology &amp; Engineering Solutions of Sandia, LLC (NTESS) |
          Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
          <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            | <a class="muted-link" href="../_sources/ProgrammingGuide/Compiling.md.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">4. Compiling</a><ul>
<li><a class="reference internal" href="#general-information">4.1 General Information</a></li>
<li><a class="reference internal" href="#using-general-cmake-build-system">4.2 Using General CMake build system</a><ul>
<li><a class="reference internal" href="#installing-and-using-kokkos">Installing and Using Kokkos</a></li>
<li><a class="reference internal" href="#using-kokkos-installed-package">Using Kokkos installed Package</a></li>
<li><a class="reference internal" href="#using-kokkos-in-tree-build">Using Kokkos in-tree build</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuring-kokkos-with-cmake">Configuring Kokkos with CMake</a><ul>
<li><a class="reference internal" href="#using-generate-makefile-bash">Using generate_makefile.bash</a></li>
<li><a class="reference internal" href="#spack">Spack</a><ul>
<li><a class="reference internal" href="#spack-development">Spack Development</a></li>
</ul>
</li>
<li><a class="reference internal" href="#kokkos-cmake-keyword-listing">Kokkos CMake Keyword Listing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-trilinos-cmake-build-system">4.3 Using Trilinos’ CMake build system</a><ul>
<li><a class="reference internal" href="#building-trilinos-with-kokkos-develop-branch">Building Trilinos with Kokkos’ develop branch</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-kokkos-gnu-makefile-system">4.4 Using Kokkos’ GNU Makefile system</a></li>
<li><a class="reference internal" href="#building-for-cuda">4.5 Building for CUDA</a></li>
<li><a class="reference internal" href="#execution-space-restrictions">4.6 Execution Space Restrictions</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    </body>
</html>